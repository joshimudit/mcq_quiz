<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Quick MCQ Quiz</title>
  <style>
    :root {
      --bg: #0b0d10; /* near-black */
      --card: #11151a; /* dark slate */
      --ink: #e7edf3; /* soft white */
      --muted: #9fb3c8; /* desaturated blue-gray */
      --accent: #7dd3fc; /* sky */
      --accent-2: #86efac; /* green */
      --warn: #fca5a5; /* red-rose */
      --ring: #1f2937;
      --radius: 18px;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; }
    body {
      margin: 0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 1200px at 80% -10%, #0f172a 0%, var(--bg) 60%);
      color: var(--ink);
      display: grid;
      place-items: center;
      padding: 24px;
    }

    .shell {
      width: min(860px, 100%);
    }

    .card {
      background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: var(--radius);
      box-shadow: 0 10px 40px rgba(0,0,0,0.4);
      backdrop-filter: blur(4px);
      padding: 22px;
    }

    header {
      display: flex; align-items: center; justify-content: space-between;
      gap: 16px; margin-bottom: 14px;
    }
    .title { font-size: clamp(18px, 2.4vw, 24px); font-weight: 700; letter-spacing: .2px; }
    .muted { color: var(--muted); font-size: 14px; }

    .progress {
      width: 100%; height: 8px; border-radius: 999px;
      background: #0f172a; overflow: hidden; border: 1px solid #111827;
    }
    .progress > div { height: 100%; width: 0; background: linear-gradient(90deg, var(--accent), var(--accent-2)); }

    .q {
      margin-top: 16px; margin-bottom: 10px; font-size: clamp(18px, 2.6vw, 22px);
      line-height: 1.4; font-weight: 600;
    }

    .opts { display: grid; gap: 10px; margin-top: 12px; }
    .btn {
      width: 100%; text-align: left; padding: 14px 16px; border-radius: 14px;
      border: 1px solid rgba(255,255,255,0.08); background: #0b1220; color: var(--ink);
      cursor: pointer; font-size: 16px; transition: transform .06s ease, background .2s ease, border-color .2s ease;
    }
    .btn:hover { transform: translateY(-1px); border-color: rgba(125,211,252,0.4); }
    .btn[disabled] { opacity: .7; cursor: not-allowed; }

    .pill {
      display: inline-flex; align-items: center; gap: 8px; padding: 8px 12px; border-radius: 999px;
      border: 1px solid rgba(255,255,255,0.12); background:#0b1220; font-size: 12px; color: var(--muted);
    }

    .feedback { margin-top: 12px; font-size: 15px; }
    .ok { color: var(--accent-2); }
    .bad { color: var(--warn); }

    .row { display:flex; gap:10px; flex-wrap: wrap; align-items: center; }
    .spacer { height: 12px; }

    .foot { display:flex; justify-content: space-between; align-items:center; margin-top: 18px; }
    .ghost {
      background: transparent; border: 1px dashed rgba(255,255,255,0.15); color: var(--muted);
      border-radius: 12px; padding: 10px 14px; cursor: pointer; font-size: 14px;
    }
    .primary { background: linear-gradient(180deg, #0ea5e9, #22d3ee); color: #05202b; border: none; font-weight: 700; }

    .endcard { text-align: center; padding: 28px 18px; }
    .score {
      font-size: 42px; font-weight: 800; letter-spacing: 1px; margin: 10px 0 4px;
      background: linear-gradient(90deg, var(--accent), var(--accent-2));
      -webkit-background-clip: text; background-clip: text; color: transparent;
    }
    .cta { margin-top: 14px; }

    /* mobile-safe spacing for bottom buttons */
    @media (max-width:520px){ .btn { padding: 12px 12px; } }
  </style>
</head>
<body>
  <div class="shell">
    <div class="card" id="card">
      <header>
        <div class="title">Mock MCQ — Quick Practice</div>
        <div class="pill"><span id="counter">Q 1/—</span></div>
      </header>

      <div class="progress" aria-label="progress"><div id="bar"></div></div>

      <div class="q" id="question">Loading…</div>
      <div class="muted" id="topic"></div>
      <div class="opts" id="options"></div>
      <div class="feedback" id="feedback"></div>

      <div class="foot">
        <button class="ghost" id="prevBtn" aria-label="Previous question">◀ Prev</button>
        <div class="row">
          <button class="ghost" id="resetBtn" aria-label="Reset quiz">Reset</button>
          <button class="ghost" id="shuffleBtn" aria-label="Shuffle questions">Shuffle</button>
          <button class="primary" id="nextBtn" aria-label="Next question">Next ▶</button>
        </div>
      </div>
    </div>

    <div class="card endcard" id="end" style="display:none">
      <div class="title">All done!</div>
      <div class="score" id="scoreLine">0 / 0</div>
      <div class="muted" id="remark">Nice work ✨</div>
      <div class="cta">
        <button class="primary" id="againBtn">Try Again</button>
      </div>
    </div>

    <div class="muted" style="margin-top:10px; text-align:center; font-size:12px">Edit questions inside this file → scroll to the <strong>Quiz Data</strong> block.</div>
  </div>

  <!-- QUIZ DATA: edit, add, or remove questions here. Keep ids unique. -->
  <script id="quiz-data" type="application/json">
  {
    "meta": {
      "title": "Banking Basics — Mini Mock",
      "topic": "JAIIB warm‑up"
    },
    "questions": [
      {
        "id": "q1",
        "text": "CRR (Cash Reserve Ratio) is maintained with —",
        "choices": ["RBI", "Scheduled Banks", "Finance Ministry", "NABARD"],
        "answer": 0,
        "explain": "Banks maintain a percentage of their NDTL as cash with the Reserve Bank of India."
      },
      {
        "id": "q2",
        "text": "PSL stands for —",
        "choices": ["Priority Sector Lending", "Public Sector Lending", "Primary Secured Loans", "Project Support Loans"],
        "answer": 0,
        "explain": "PSL is Priority Sector Lending — targets set by RBI for sectors like agri, MSME, etc."
      },
      {
        "id": "q3",
        "text": "Which instrument has both debt and equity features?",
        "choices": ["Commercial Paper", "Preference Shares", "Certificate of Deposit", "Treasury Bill"],
        "answer": 1,
        "explain": "Preference shares get fixed dividends (debt‑like) but are equity instruments in structure."
      },
      {
        "id": "q4",
        "text": "In KYC, ‘OCDD’ generally refers to —",
        "choices": ["Ongoing Customer Due Diligence", "Online Credit Data Disclosure", "Official Customer Data Directory", "Obligatory Compliance & Data Disclosure"],
        "answer": 0,
        "explain": "Banks must monitor customers on an ongoing basis — Ongoing CDD."
      }
    ]
  }
  </script>

  <script>
    // Utility: read JSON from the embedded script tag
    function loadQuizFromScript() {
      const el = document.getElementById('quiz-data');
      try { return JSON.parse(el.textContent.trim()); }
      catch (e) { console.error('Quiz JSON parse error', e); return { meta:{title:'Quiz'}, questions: []}; }
    }

    // State
    let QUIZ = loadQuizFromScript();
    let idx = 0;
    let selected = new Map(); // id -> {choice, correct}

    // DOM refs
    const counter = document.getElementById('counter');
    const bar = document.getElementById('bar');
    const qEl = document.getElementById('question');
    const topicEl = document.getElementById('topic');
    const optsEl = document.getElementById('options');
    const feedbackEl = document.getElementById('feedback');
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const resetBtn = document.getElementById('resetBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');

    const end = document.getElementById('end');
    const card = document.getElementById('card');
    const scoreLine = document.getElementById('scoreLine');
    const remark = document.getElementById('remark');
    const againBtn = document.getElementById('againBtn');

    // Render helpers
    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function render() {
      const q = QUIZ.questions[idx];
      const total = QUIZ.questions.length;
      document.title = QUIZ.meta?.title || 'MCQ Quiz';
      counter.textContent = `Q ${idx+1}/${total}`;
      bar.style.width = `${((idx) / total) * 100}%`;
      qEl.textContent = q.text;
      topicEl.textContent = QUIZ.meta?.topic || '';
      feedbackEl.textContent = '';

      optsEl.innerHTML = '';
      q.choices.forEach((choice, i) => {
        const btn = document.createElement('button');
        btn.className = 'btn';
        btn.textContent = choice;
        btn.addEventListener('click', () => selectAnswer(i));
        optsEl.appendChild(btn);
      });

      // if revisiting, restore selection + feedback
      const prev = selected.get(q.id);
      if (prev) {
        reveal(prev.choice);
      }

      prevBtn.disabled = idx === 0;
      nextBtn.textContent = idx === total - 1 ? 'Finish ▶' : 'Next ▶';
    }

    function selectAnswer(i) {
      const q = QUIZ.questions[idx];
      const isCorrect = i === q.answer;
      selected.set(q.id, { choice: i, correct: isCorrect });
      reveal(i);
    }

    function reveal(i){
      const q = QUIZ.questions[idx];
      const buttons = [...optsEl.querySelectorAll('.btn')];
      buttons.forEach((b, bi) => {
        b.disabled = true;
        b.style.borderColor = 'rgba(255,255,255,0.12)';
        b.style.background = '#0b1220';
      });
      // color current selection
      const picked = buttons[i];
      if (picked) picked.style.borderColor = (i === q.answer) ? 'rgba(134, 239, 172, 0.7)' : 'rgba(252, 165, 165, 0.7)';

      // show correct
      const correctBtn = buttons[q.answer];
      if (correctBtn) {
        correctBtn.style.background = 'linear-gradient(180deg, #064e3b, #052e2b)';
        correctBtn.style.borderColor = 'rgba(134, 239, 172, 0.8)';
      }

      feedbackEl.innerHTML = (i === q.answer)
        ? `<span class="ok">✅ Correct!</span>`
        : `<span class="bad">❌ Incorrect.</span> Correct answer: <strong>${q.choices[q.answer]}</strong><br><span class="muted">${q.explain || ''}</span>`;
    }

    function next(){
      if (idx < QUIZ.questions.length - 1) {
        idx++; render();
      } else {
        finish();
      }
    }
    function prev(){ idx = clamp(idx-1, 0, QUIZ.questions.length-1); render(); }

    function finish(){
      bar.style.width = '100%';
      const total = QUIZ.questions.length;
      let correct = 0; for (const q of QUIZ.questions){ if (selected.get(q.id)?.correct) correct++; }
      scoreLine.textContent = `${correct} / ${total}`;
      remark.textContent = funRemark(correct, total);
      card.style.display = 'none';
      end.style.display = 'block';
    }

    function reset(all=true){
      if (all){ selected.clear(); idx = 0; }
      card.style.display = 'block'; end.style.display = 'none';
      render();
    }

    function funRemark(c, t){
      const pct = (c/t)*100;
      if (pct === 100) return "💯 Legend! Perfect score. Treat yourself to chai.";
      if (pct >= 80) return "🔥 Strong game. You’d ace the real thing.";
      if (pct >= 60) return "👍 Good stuff. A quick revision will push you over the top.";
      if (pct >= 40) return "🙂 Not bad. A little grind and you’re golden.";
      return "🧠 Every pro was once a beginner. Want to try a fresh set now?";
    }

    function shuffle(){
      // Fisher–Yates on the questions array
      for (let i = QUIZ.questions.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [QUIZ.questions[i], QUIZ.questions[j]] = [QUIZ.questions[j], QUIZ.questions[i]];
      }
      // also clear state
      selected.clear(); idx = 0; render();
    }

    // Bind
    nextBtn.addEventListener('click', next);
    prevBtn.addEventListener('click', prev);
    resetBtn.addEventListener('click', () => reset(true));
    shuffleBtn.addEventListener('click', shuffle);
    againBtn.addEventListener('click', () => reset(true));

    // Start
    if (!Array.isArray(QUIZ.questions) || QUIZ.questions.length === 0) {
      qEl.textContent = 'No questions found — add some in the JSON block below.';
      nextBtn.disabled = true; prevBtn.disabled = true; shuffleBtn.disabled = true; resetBtn.disabled = true;
    } else {
      render();
    }
  </script>
</body>
</html>
